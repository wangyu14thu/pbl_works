# PBL职业体验探索APP - v2.0 更新说明

## 更新日期
2026-01-06

## 核心更新内容

### 1. 新增"项目三选一"功能（模块三）

根据PRD v2.0的需求，在**角色选择**和**项目详情**之间增加了一个全新的**项目选择页面**。

#### 更新前流程
```
注册 → 选择角色 → 加载动画 → 项目详情 → 项目指南
```

#### 更新后流程（v2.0）
```
注册 → 选择角色 → 加载动画 → [项目三选一] → 项目详情 → 项目指南
```

### 2. 详细功能实现

#### 2.1 项目选择页面（page-project-select）

**页面结构：**
- **顶部身份徽章**：显示角色图标和角色名称，带有浮动动画效果
- **欢迎标题**：显示"你好，[年级]的[角色名]！"
- **挑战引导语**：显示"地球总部发来 3 项紧急挑战，请选择一项你最想开启的使命："
- **三个项目卡片**：以网格形式横向展示（响应式，移动端自动竖向排列）

**项目卡片包含：**
- 项目标签（项目A/B/C）
- 项目标题
- 难度星级（⭐⭐⭐）
- 核心挑战说明
- 你的使命描述
- 关键词标签（3个，不同颜色）
- "查看详情并接受任务"按钮

**交互设计：**
- 点击卡片：高亮选中状态（绿色边框+阴影）
- 悬停卡片：浮起效果+星星动画
- 点击按钮：进入项目详情页

**视觉特效：**
- 卡片悬停：向上浮起15px，缩放1.05倍，粉色光晕
- 选中状态：绿色边框+绿色光晕
- 角色徽章：上下浮动动画
- 关键词标签：彩色渐变背景，每个标签不同颜色

#### 2.2 数据结构更新

**角色数据（rolesData）：**
```javascript
{
    id: 'R001',
    name: '自然守护者',
    icon: '🌿',
    image: 'assets/images/roles/自然守护者.png',
    projectIds: ['P301A', 'P301B', 'P301C'], // 从单个projectId改为数组projectIds
    tags: ['深度观察', '绿色设计', '共情行动'],
    description: '守护自然，关怀生命'
}
```

**项目数据（projectsData）新增字段：**
```javascript
{
    id: 'P301A',
    difficulty: '⭐⭐⭐',        // 新增：难度星级
    badge: '项目A',              // 新增：项目标签
    challenge: '...',            // 新增：核心挑战描述
    mission: '...',              // 新增：使命描述
    keywords: ['...', '...'],    // 新增：关键词数组
    // ... 原有字段
}
```

### 3. 新增项目内容

为每个角色设计了**3个不同维度的探究项目**，共计15个项目：

#### 自然守护者（R001）
- **P301A - 校园流浪猫避风港**（难度⭐⭐⭐）：动物关怀、工程搭建
- **P301B - 校园植物"身份证"**（难度⭐⭐）：生物观察、科普写作
- **P301C - 雨水收集灌溉系统**（难度⭐⭐⭐⭐）：节约用水、物理实验

#### 未来工程师（R002）
- **P302A - 自动浇花装置发明**（难度⭐⭐⭐⭐）：创意思维、动手实践
- **P302B - 智能垃圾分类提醒器**（难度⭐⭐⭐）：环保科技、智能设计
- **P302C - 教室降噪神器设计**（难度⭐⭐⭐⭐⭐）：声学原理、空间设计

#### 少年CEO（R003）
- **P303A - 班级零食交换日**（难度⭐⭐⭐）：商业思维、沟通协调
- **P303B - 班级图书漂流计划**（难度⭐⭐⭐⭐）：共享经济、资源整合
- **P303C - 班级跳蚤市场策划**（难度⭐⭐⭐⭐⭐）：市场运营、定价策略

#### 文化策展人（R004）
- **P304A - 探寻家乡非遗手艺**（难度⭐⭐⭐⭐）：文化传承、审美鉴赏
- **P304B - 班级文化墙策展**（难度⭐⭐⭐）：视觉设计、内容策划
- **P304C - 节日文化体验日**（难度⭐⭐⭐⭐⭐）：文化研究、活动策划

#### 游戏策划师（R005）
- **P305A - 课间游戏设计师**（难度⭐⭐⭐）：创意设计、规则制定
- **P305B - 桌游改造计划**（难度⭐⭐⭐⭐）：游戏平衡、规则创新
- **P305C - 班级剧本杀设计**（难度⭐⭐⭐⭐⭐）：故事设计、角色塑造

### 4. 代码更新清单

#### HTML（index.html）
- 新增`<div id="page-project-select">`页面区块
- 包含项目选择容器`<div id="projects-container">`
- 添加"返回重选角色"按钮`<button id="btn-back-to-roles-from-select">`

#### CSS（assets/css/style.css）
- 新增`.select-header`及相关样式（约300行）
- 新增`.role-badge`角色徽章样式+动画
- 新增`.projects-container`项目网格布局
- 新增`.project-card`卡片样式+悬停动画
- 新增`.project-keyword`彩色标签样式
- 新增响应式媒体查询

#### JavaScript（assets/js/script.js）
- 更新`rolesData`：`projectId` → `projectIds`数组
- 更新`projectsData`：为所有项目添加新字段（difficulty, badge, challenge, mission, keywords）
- 新增`loadProjectSelect()`函数：生成项目选择页
- 新增`selectProject(project)`函数：确认项目选择
- 修改`selectRole(role)`函数：跳转到项目选择页而非直接进入项目详情
- 新增按钮事件监听：`btn-back-to-roles-from-select`

### 5. 设计亮点

#### 视觉设计
- **卡通风格**：保持原有的卡通、明亮、未来感设计风格
- **色彩系统**：
  - 项目卡片：白色磨砂玻璃+彩色边框
  - 关键词标签：蓝色、橙色、绿色渐变
  - 角色徽章：粉色边框+白色背景
- **动画效果**：
  - 卡片悬停浮起+缩放
  - 星星闪烁动画
  - 角色徽章浮动
  - 图标旋转

#### 用户体验
- **自主选择感**：学生从3个项目中选择，增强主人翁意识
- **清晰的信息层级**：挑战→使命→关键词，逐层递进
- **即时反馈**：悬停、选中状态的明显变化
- **灵活返回**：可以返回重新选择角色

#### 响应式设计
- **桌面端**：3列网格，卡片横向排列
- **平板端**：2列或1列，自动适应
- **移动端**：单列，卡片纵向堆叠

### 6. 扩展性

#### 易于添加新项目
- 只需在`projectsData`中添加新项目对象
- 在`rolesData`的`projectIds`数组中引用
- 无需修改页面结构和样式

#### 支持不同年级
- 数据结构已支持按年级分组
- 可轻松添加1-2年级、4-6年级的角色和项目

#### 支持更多项目
- 虽然当前是"三选一"，但项目容器使用的是网格布局
- 可以扩展为"五选一"或"七选一"而无需修改CSS

### 7. 后端接口建议

根据PRD要求，前端当前使用静态数据，建议后端提供以下接口：

#### 获取角色列表
```
GET /api/roles?grade={grade}
返回：该年级的所有角色数据（包含projectIds数组）
```

#### 获取项目列表
```
GET /api/projects?grade={grade}&role_id={role_id}
返回：该角色对应的3个项目的完整信息
```

#### 获取项目详情
```
GET /api/project/{project_id}
返回：单个项目的详细信息（含PBL步骤）
```

### 8. 测试清单

- [x] 注册流程正常
- [x] 角色选择跳转到项目选择页
- [x] 项目选择页显示3个项目
- [x] 项目卡片悬停效果
- [x] 项目选中状态切换
- [x] 点击项目按钮进入详情页
- [x] 返回角色选择功能
- [x] 响应式布局（移动端）
- [x] 所有动画流畅运行
- [x] 数据完整性（15个项目数据）

### 9. 已知限制

1. 当前只实现了**三年级**的5个角色共15个项目
2. 其他年级（1-2年级、4-6年级）需要补充数据
3. 项目指南页面仍使用原有结构（4步PBL流程）
4. 角色图片需要用户自行提供（当前使用本地路径）

### 10. 部署说明

#### 本地测试
```bash
cd /home/wangyu/workspace/private
python3 -m http.server 8000
# 访问 http://localhost:8000
```

#### GitHub Pages部署
```bash
cd tools
./deploy.sh
# 选择选项 2) 部署到GitHub Pages
```

#### 文件完整性
更新后的核心文件：
- `index.html` - 已添加项目选择页面
- `assets/css/style.css` - 已添加新样式（约300行）
- `assets/js/script.js` - 已更新数据和逻辑（约100行修改/新增）
- `manifest.json` - PWA配置（未修改）
- `service-worker.js` - 离线缓存（未修改）

---

## 版本对比

| 功能 | v1.0 | v2.0 |
|-----|------|------|
| 角色选择 | ✓ | ✓ |
| 项目匹配 | 直接匹配 | **三选一** |
| 项目数量 | 5个（每角色1个） | **15个（每角色3个）** |
| 项目展示 | 无中间页 | **项目列表页** |
| 自主选择 | 无 | **学生自选** |
| 难度显示 | 无 | **星级难度** |
| 关键词标签 | 无 | **彩色标签** |

---

## 未来计划（v2.1）

1. 为1-2年级、4-6年级补充角色和项目数据
2. 增加项目收藏/历史记录功能
3. 添加项目完成进度展示
4. 支持项目分享功能
5. 优化项目指南页的互动体验
6. 增加勋章收集墙

---

**更新完成！** 🎉

如有问题或需要进一步调整，请参考本文档或联系开发团队。

